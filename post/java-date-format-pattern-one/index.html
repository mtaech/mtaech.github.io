<!doctype html><html lang=zh-cn><head><title>Java DateTimeFormatter 初识（一） | 我的博客</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="mtaech"><meta name=description content="今天趁着有空闲时间看了 Java8 DateTimeFormatter 的文档总算对 Java 的时间格式有了基本的认识，这里做个笔记记录一下。 时间格式化字符串定义 该表来自于 DateTimeFormatter JDK 8 官方文档 格式字符"><meta name=keywords content><meta name=robots content="max-image-preview:large"><link rel=canonical href=/post/java-date-format-pattern-one/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=icon sizes=16x16 href=/favicon.ico><meta property="og:title" content="Java DateTimeFormatter 初识（一）  "><meta property="og:description" content="今天趁着有空闲时间看了 Java8 DateTimeFormatter 的文档总算对 Java 的时间格式有了基本的认识，这里做个笔记记录一下。 时间格式化字符串定义 该表来自于 DateTimeFormatter JDK 8 官方文档 格式字符"><meta property="og:type" content="article"><meta property="og:url" content="/post/java-date-format-pattern-one/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-01-05T14:17:08+08:00"><meta property="article:modified_time" content="2022-01-14T17:08:42+08:00"><meta property="og:site_name" content="我的博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java DateTimeFormatter 初识（一）  "><meta name=twitter:description content="今天趁着有空闲时间看了 Java8 DateTimeFormatter 的文档总算对 Java 的时间格式有了基本的认识，这里做个笔记记录一下。 时间格式化字符串定义 该表来自于 DateTimeFormatter JDK 8 官方文档 格式字符"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Java DateTimeFormatter 初识（一）  ","description":"今天趁着有空闲时间看了 Java8 DateTimeFormatter 的文档总算对 Java 的时间格式有了基本的认识，这里做个笔记记录一下。 时间格式化字符串定义 该表来自于 DateTimeFormatter JDK 8 官方文档 格式字符","keywords":[],"articleBody":" 今天趁着有空闲时间看了 Java8 DateTimeFormatter 的文档总算对 Java 的时间格式有了基本的认识，这里做个笔记记录一下。\n时间格式化字符串定义 该表来自于 DateTimeFormatter JDK 8 官方文档\n格式字符 意义 描述 例子 G era text AD; Anno Domini; A u year year 2004; 04 y year-of-era year 2004; 04 D day-of-year number 189 M/L month-of-year number/text 7; 07; Jul; July; J d day-of-month number 10 Q/q quarter-of-year number/text 3; 03; Q3; 3rd quarter Y week-based-year year 1996; 96 w week-of-week-based-year number 27 W week-of-month number 4 E day-of-week text Tue; Tuesday; T e/c localized day-of-week number/text 2; 02; Tue; Tuesday; T F week-of-month number 3 a am-pm-of-day text PM h clock-hour-of-am-pm (1-12) number 12 K hour-of-am-pm (0-11) number 0 k clock-hour-of-am-pm (1-24) number 0 H hour-of-day (0-23) number 0 m minute-of-hour number 30 s second-of-minute number 55 S fraction-of-second fraction 978 A milli-of-day number 1234 n nano-of-second number 987654321 N nano-of-day number 1234000000 V time-zone ID zone-id America/Los_Angeles; Z; -08:30 z time-zone name zone-name Pacific Standard Time; PST O localized zone-offset offset-O GMT+8; GMT+08:00; UTC-08:00; X zone-offset 'Z' for zero offset-X Z; -08; -0830; -08:30; -083015; -08:30:15; x zone-offset offset-x +0000; -08; -0830; -08:30; -083015; -08:30:15; Z zone-offset offset-Z +0000; -0800; -08:00; p pad next pad modifier 1 ' escape for text delimiter '' single quote literal ' [ optional section start ] optional section end '# reserved for future use { reserved for future use } reserved for future use 年份格式 和年份有关的格式化字符有 4 个分别是: G,u,y,Y\nG：纪年标志 G 纪元标识，显示当前年份属于公元前还是公元后。要注意的是：yyyy 格式下不存在公元前零年， 或者公元后零年。年份从一开始，年份值为零时对应的是公元前一年。\n1 DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"G yyyy\"); 2 formatter.format(LocalDate.of(1,1,1));//结果：公元 0001 3 formatter.format(LocalDate.of(0,1,1));//结果：公元前 0001 4 formatter.format(LocalDate.of(-1,1,1));//结果：公元前 0002 u，y，Y：年份标志 prolptic-year：u/Y 和 year-of-ear：y 的差别 u，y，Y 都是年份格式字符串。但是区别在于 u/Y 是 prolptic-year y 属于 year-of-era。二者的差别可详见 Stack Overflow。\n简略的来说 u/Y 在年份为公元前时会将年份转换为从零开始的负数，而 y 在 转换公元前的年份时则是从一开始递增。\n1DateTimeFormatter formatter = 2 DateTimeFormatter.ofPattern(\"'proleptic-year:' u Y G '-- era-year:' y G\"); 3formatter.format(LocalDate.of(2,3,1));//结果：proleptic-year: 2 2 公元 -- era-year: 2 公元 4formatter.format(LocalDate.of(1,3,1));//结果:proleptic-year: 1 1 公元 -- era-year: 1 公元 5formatter.format(LocalDate.of(0,3,1));//结果：proleptic-year: 0 0 公元前 -- era-year: 1 公元前 6formatter.format(LocalDate.of(-1,3,1));//结果：proleptic-year: -1 -1 公元前 -- era-year: 2 公元前 year-of-ear：y 和 week-based-year：Y 的差别 y 和 Y 的差别在于第一周存在跨年时 YYYY 会根据 WeekFields 中 firstDayOfWeek(每周 第一天) 和 minimalDays(当年第一周天数最小数) 属性值来计算跨年周属于哪一年。从每 周第一天开始计算如果在新年的天数大于等于第一周天数最小数那么跨年周属于新年的第一 周，否则属于旧年的最后一周。同时改周内所有的天数年分都会被设定为周所在年份，这也 就是为什么不推荐使用 YYYY 格式化年份的原因。\nDateTimeFormatter 中 WeekFields 上述两个字段的默认值由 Locale 决定。WeekFields 默认有两种规则 ISO（起始天为周一，第一周最少 4 天）和 SUNDAY_START（起始天为周四， 第一周最少 1 天） 。\n要注意的是 Locale.CHINA 默认使用的是 SUNDAY_START。\n1 LocalDate date = LocalDate.of(2022, 1, 1); 2 DateTimeFormatter formatterUK = 3 DateTimeFormatter.ofPattern(\"YYYY-MM-dd '第'ww'周'\", Locale.UK); 4 DateTimeFormatter formatterCN = 5 DateTimeFormatter.ofPattern(\"YYYY-MM-dd '第'ww'周'\",Locale.CHINA); 6 System.out.printf(\"中国时间:%s\\n\",formatterCN.format(date));//结果：中国时间：2022-01-01 01 7 System.out.printf(\"英国时间:%s\\n\",formatterUK.format(date));//结果：英国时间：2021-01-01 52 因为跨年周在2021年有5天所以被判定为 2021 年 季度格式 季度相关的格式化字符只有 Q/q 两个，规则都是从一月开始每三个月算一个季度。 唯一不同的在于格式化结果不一样，q 格式除了 qq 显示 01 外，其他数量的 q 都显示为 1 。 而 Q 格式则是不同数量的 Q 在不同地区下有着不同的格式化结果。\n格式 英语地区 中文地区 Q 1 1 QQ 01 01 QQQ Q1 1 季 QQQQ 1st quarter 第 1 季度 QQQQQ 1 1 月份格式 月份格式也只有两个: M/L ,两个格式大同小异，区别在于 M 能支持更多的格式结果\n格式 英语地区 中文地区 M/L 1/1 1/1 MM/LL 01/01 01/01 MMM/LLL Jan/1 一月/一月 MMMM/LLLL January/1 一月/一月 MMMMM/LLLLL J/1 1/一月 周格式 周格式有三个：W(基于月的周数),w(基于 Y 格式的周数)。\n其中格式 w 在遭遇跨年时会按照 WeekFields 的规则来进行周数判断，格式化的结果时该 周在当年属于第几周。\n而格式 W ，则是在遭遇跨月时按照 WeekFields 的规则来判断。如 果该周在新月份中的天数小于 WeekFields 中的一周最小天数，那么结果为 0 ，反之为 1。\n时间 格式 英语地区 中文地区 2022-01-01 W/w 0/52 1/1 2022-01-05 W/w 1/1 2/2 2022-04-01 W/w 0/13 1/14 天格式 关于天的格式有：D, d , E , F , e , c\n格式 规则 日期例子 结果 备注 D 查找该天在当年是第几天 2022-02-10 41 d 查找该天在当月是第几天 2022-02-10 10 E 查找该天在当周是第几天 2022-02-10 Thu；Thursday；星期四 受地区影响有本地化输出 e/c 根据 WeekFields 的firstDayOfWeek 来判定该天在当周是第几天 2022-02-10 4 受地区影响有本地化输出 F 把每月一号当作第一周的第一天，来计算当天属于周内第几天 2022-02-10 3 JDK8 官方文档错误，11 已纠正 小时格式 关于小时的格式有：a,h,K,k,H\n格式 规则 日期例子 结果 备注 a 上午还是下午标志 2022-02-10 13:00:00 PM;下午 受Local 影响有本地化输出 h 时钟式时间 1-12 2022-02-10 13:00:00 1;01 12:00 输出为 12 K 12小时制时间 0-11 2022-02-10 13:00:00 1;01 12:00 输出为 00 k 时钟式时间 1-24 2022-02-10 13:00:00 13 00:00 输出为 24 H 24小时制 0-23 2022-02-10 13:00:00 13 00:00 输出为 00 分秒格式 关于分和秒的格式有： m，s,S,A,n,N\n格式 规则 日期例子 结果 备注 m 小时内的分钟值 13:10:00 10 s 分钟内的秒值 13:10:11 11 S 毫秒值 0-999 13:10:12.434 434 A 对应时间是当天的第多少毫秒 14:00:00.123 50400123 一秒等于一千毫秒 n 秒内的纳秒数 14:00:00.123 123000000 一百万纳秒等于一毫米 N 对应时间是当天的第多少纳秒 14:00:00.123 50400123000000 额外格式 格式 规则 日期例子 结果 备注 VV 输出当前时区Id 14:00:00 Asia/Shanghai 1.只接受VV，其他个数的V会抛出异常。2.只能用来格式化 ZonedDateTime z 输出当前时区名 14:00:00 CST 注意美国中部时间和北京时间都是 CST ","articleSection":"post","mainEntityOfPage":"/post/java-date-format-pattern-one/","wordCount":2487,"author":{"@type":"Person","url":"/","name":"mtaech"},"publisher":{"@type":"Organization","url":"/","name":"我的博客"},"datePublished":"2022-01-05T14:17:08+08:00","dateModified":"2022-01-14T17:08:42+08:00","inLanguage":"zh-CN"}</script><link rel=stylesheet href=/styles.min.4e16f57f2ae814b78f987d6b0787a0b8cb183b11e1167a467fc4c5abe212103b.css><style>iframe[sandbox]:not([sandbox=""]){display:none!important}</style></head><body><header><a href=/>我的博客</a><nav><ul><li><a href=/>首页</a></li><li><a href=/archives/>归档</a></li><li><a href=/tags/>标签</a></li><li><a href=/about/>关于</a></li></ul></nav></header><main><article><header><h1>Java DateTimeFormatter 初识（一）</h1><span>📅
<time datetime=2022-01-05T14:17:08+08:00>2022/01/05</time>
(
<a href=https://github.com/mtaech/notebook/commits/main/content/post/java-date-format-pattern-one.org title=修正yaml格式问题 target=_blank rel=noopener><time datetime=2022-01-14T17:08:42+08:00>2022/01/14</time> 更新</a>
)
| 🏷️
<a href=/tags/datetimeformatter/ rel=tag>#DateTimeFormatter</a></span></header><details><summary>文章目录</summary><nav id=TableOfContents><ul><li><a href=#headline-1>时间格式化字符串定义</a></li><li><a href=#headline-2>年份格式</a><ul><li><a href=#headline-3>G：纪年标志</a></li><li><a href=#headline-4>u，y，Y：年份标志</a><ul><li><a href=#headline-5>prolptic-year：u/Y 和 year-of-ear：y 的差别</a></li><li><a href=#headline-6>year-of-ear：y 和 week-based-year：Y 的差别</a></li></ul></li></ul></li><li><a href=#headline-7>季度格式</a></li><li><a href=#headline-8>月份格式</a></li><li><a href=#headline-9>周格式</a></li><li><a href=#headline-10>天格式</a></li><li><a href=#headline-11>小时格式</a></li><li><a href=#headline-12>分秒格式</a></li><li><a href=#headline-13>额外格式</a></li></ul></nav></details><p>今天趁着有空闲时间看了 Java8 <a href=https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns>DateTimeFormatter</a> 的文档总算对 Java 的时间格式有了基本的认识，这里做个笔记记录一下。</p><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>时间格式化字符串定义</h2><div id=outline-text-headline-1 class=outline-text-2><p>该表来自于 DateTimeFormatter JDK 8 官方文档</p><table><tbody><tr><td>格式字符</td><td>意义</td><td>描述</td><td>例子</td></tr><tr><td>G</td><td>era</td><td>text</td><td>AD; Anno Domini; A</td></tr><tr><td>u</td><td>year</td><td>year</td><td>2004; 04</td></tr><tr><td>y</td><td>year-of-era</td><td>year</td><td>2004; 04</td></tr><tr><td>D</td><td>day-of-year</td><td>number</td><td>189</td></tr><tr><td>M/L</td><td>month-of-year</td><td>number/text</td><td>7; 07; Jul; July; J</td></tr><tr><td>d</td><td>day-of-month</td><td>number</td><td>10</td></tr><tr><td>Q/q</td><td>quarter-of-year</td><td>number/text</td><td>3; 03; Q3; 3rd quarter</td></tr><tr><td>Y</td><td>week-based-year</td><td>year</td><td>1996; 96</td></tr><tr><td>w</td><td>week-of-week-based-year</td><td>number</td><td>27</td></tr><tr><td>W</td><td>week-of-month</td><td>number</td><td>4</td></tr><tr><td>E</td><td>day-of-week</td><td>text</td><td>Tue; Tuesday; T</td></tr><tr><td>e/c</td><td>localized day-of-week</td><td>number/text</td><td>2; 02; Tue; Tuesday; T</td></tr><tr><td>F</td><td>week-of-month</td><td>number</td><td>3</td></tr><tr><td>a</td><td>am-pm-of-day</td><td>text</td><td>PM</td></tr><tr><td>h</td><td>clock-hour-of-am-pm (1-12)</td><td>number</td><td>12</td></tr><tr><td>K</td><td>hour-of-am-pm (0-11)</td><td>number</td><td>0</td></tr><tr><td>k</td><td>clock-hour-of-am-pm (1-24)</td><td>number</td><td>0</td></tr><tr><td>H</td><td>hour-of-day (0-23)</td><td>number</td><td>0</td></tr><tr><td>m</td><td>minute-of-hour</td><td>number</td><td>30</td></tr><tr><td>s</td><td>second-of-minute</td><td>number</td><td>55</td></tr><tr><td>S</td><td>fraction-of-second</td><td>fraction</td><td>978</td></tr><tr><td>A</td><td>milli-of-day</td><td>number</td><td>1234</td></tr><tr><td>n</td><td>nano-of-second</td><td>number</td><td>987654321</td></tr><tr><td>N</td><td>nano-of-day</td><td>number</td><td>1234000000</td></tr><tr><td>V</td><td>time-zone ID</td><td>zone-id</td><td>America/Los_Angeles; Z; -08:30</td></tr><tr><td>z</td><td>time-zone name</td><td>zone-name</td><td>Pacific Standard Time; PST</td></tr><tr><td>O</td><td>localized zone-offset</td><td>offset-O</td><td>GMT+8; GMT+08:00; UTC-08:00;</td></tr><tr><td>X</td><td>zone-offset 'Z' for zero</td><td>offset-X</td><td>Z; -08; -0830; -08:30; -083015; -08:30:15;</td></tr><tr><td>x</td><td>zone-offset</td><td>offset-x</td><td>+0000; -08; -0830; -08:30; -083015; -08:30:15;</td></tr><tr><td>Z</td><td>zone-offset</td><td>offset-Z</td><td>+0000; -0800; -08:00;</td></tr><tr><td>p</td><td>pad next</td><td>pad modifier</td><td>1</td></tr><tr><td>'</td><td>escape for text</td><td>delimiter</td><td></td></tr><tr><td>''</td><td>single quote</td><td>literal</td><td>'</td></tr><tr><td>[</td><td>optional section start</td><td></td><td></td></tr><tr><td>]</td><td>optional section end</td><td></td><td></td></tr><tr><td>'#</td><td>reserved for future use</td><td></td><td></td></tr><tr><td>{</td><td>reserved for future use</td><td></td><td></td></tr><tr><td>}</td><td>reserved for future use</td><td></td><td></td></tr></tbody></table></div></div><div id=outline-container-headline-2 class=outline-2><h2 id=headline-2>年份格式</h2><div id=outline-text-headline-2 class=outline-text-2><p>和年份有关的格式化字符有 4 个分别是: G,u,y,Y</p><div id=outline-container-headline-3 class=outline-3><h3 id=headline-3>G：纪年标志</h3><div id=outline-text-headline-3 class=outline-text-3><p>G 纪元标识，显示当前年份属于公元前还是公元后。要注意的是：yyyy 格式下不存在公元前零年，
或者公元后零年。年份从一开始，年份值为零时对应的是公元前一年。</p><div class="src src-java"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a></span><span class=cl>  <span class=n>DateTimeFormatter</span> <span class=n>formatter</span> <span class=o>=</span> <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ofPattern</span><span class=o>(</span><span class=s>&#34;G yyyy&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2>2</a></span><span class=cl>  <span class=n>formatter</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>1</span><span class=o>,</span><span class=n>1</span><span class=o>));</span><span class=c1>//结果：公元 0001
</span></span></span><span class=line><span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3>3</a></span><span class=cl><span class=c1></span>  <span class=n>formatter</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>0</span><span class=o>,</span><span class=n>1</span><span class=o>,</span><span class=n>1</span><span class=o>));</span><span class=c1>//结果：公元前 0001
</span></span></span><span class=line><span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4>4</a></span><span class=cl><span class=c1></span>  <span class=n>formatter</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(-</span><span class=n>1</span><span class=o>,</span><span class=n>1</span><span class=o>,</span><span class=n>1</span><span class=o>));</span><span class=c1>//结果：公元前 0002
</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-4 class=outline-3><h3 id=headline-4>u，y，Y：年份标志</h3><div id=outline-text-headline-4 class=outline-text-3><div id=outline-container-headline-5 class=outline-4><h4 id=headline-5>prolptic-year：u/Y 和 year-of-ear：y 的差别</h4><div id=outline-text-headline-5 class=outline-text-4><p>u，y，Y 都是年份格式字符串。但是区别在于 u/Y 是 prolptic-year y 属于
year-of-era。二者的差别可详见 <a href=https://stackoverflow.com/questions/29014225/what-is-the-difference-between-year-and-year-of-era>Stack Overflow</a>。</p><p>简略的来说 u/Y 在年份为公元前时会将年份转换为从零开始的负数，而 y 在
转换公元前的年份时则是从一开始递增。</p><div class="src src-java"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a></span><span class=cl><span class=n>DateTimeFormatter</span> <span class=n>formatter</span> <span class=o>=</span>
</span></span><span class=line><span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2>2</a></span><span class=cl>                <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ofPattern</span><span class=o>(</span><span class=s>&#34;&#39;proleptic-year:&#39; u Y G &#39;-- era-year:&#39; y G&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3>3</a></span><span class=cl><span class=n>formatter</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2</span><span class=o>,</span><span class=n>3</span><span class=o>,</span><span class=n>1</span><span class=o>));</span><span class=c1>//结果：proleptic-year: 2 2 公元 -- era-year: 2 公元
</span></span></span><span class=line><span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4>4</a></span><span class=cl><span class=c1></span><span class=n>formatter</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>1</span><span class=o>,</span><span class=n>3</span><span class=o>,</span><span class=n>1</span><span class=o>));</span><span class=c1>//结果:proleptic-year: 1 1 公元 -- era-year: 1 公元
</span></span></span><span class=line><span class=ln id=5><a style=outline:none;text-decoration:none;color:inherit href=#5>5</a></span><span class=cl><span class=c1></span><span class=n>formatter</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>0</span><span class=o>,</span><span class=n>3</span><span class=o>,</span><span class=n>1</span><span class=o>));</span><span class=c1>//结果：proleptic-year: 0 0 公元前 -- era-year: 1 公元前
</span></span></span><span class=line><span class=ln id=6><a style=outline:none;text-decoration:none;color:inherit href=#6>6</a></span><span class=cl><span class=c1></span><span class=n>formatter</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(-</span><span class=n>1</span><span class=o>,</span><span class=n>3</span><span class=o>,</span><span class=n>1</span><span class=o>));</span><span class=c1>//结果：proleptic-year: -1 -1 公元前 -- era-year: 2 公元前
</span></span></span></code></pre></div></div></div></div><div id=outline-container-headline-6 class=outline-4><h4 id=headline-6>year-of-ear：y 和 week-based-year：Y 的差别</h4><div id=outline-text-headline-6 class=outline-text-4><p>y 和 Y 的差别在于第一周存在跨年时 YYYY 会根据 <a href=https://docs.oracle.com/javase/8/docs/api/java/time/temporal/WeekFields.html>WeekFields</a> 中 firstDayOfWeek(每周
第一天) 和 minimalDays(当年第一周天数最小数) 属性值来计算跨年周属于哪一年。从每
周第一天开始计算如果在新年的天数大于等于第一周天数最小数那么跨年周属于新年的第一
周，否则属于旧年的最后一周。同时改周内所有的天数年分都会被设定为周所在年份，这也
就是为什么不推荐使用 YYYY 格式化年份的原因。</p><p>DateTimeFormatter 中 WeekFields 上述两个字段的默认值由 <a href=https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html>Locale</a> 决定。WeekFields
默认有两种规则 ISO（起始天为周一，第一周最少 4 天）和 SUNDAY_START（起始天为周四，
第一周最少 1 天） 。</p><p>要注意的是 Locale.CHINA 默认使用的是 SUNDAY_START。</p><div class="src src-java"><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=ln id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a></span><span class=cl>  <span class=n>LocalDate</span> <span class=n>date</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2022</span><span class=o>,</span> <span class=n>1</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=ln id=2><a style=outline:none;text-decoration:none;color:inherit href=#2>2</a></span><span class=cl>  <span class=n>DateTimeFormatter</span> <span class=n>formatterUK</span> <span class=o>=</span>
</span></span><span class=line><span class=ln id=3><a style=outline:none;text-decoration:none;color:inherit href=#3>3</a></span><span class=cl>      <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ofPattern</span><span class=o>(</span><span class=s>&#34;YYYY-MM-dd &#39;第&#39;ww&#39;周&#39;&#34;</span><span class=o>,</span> <span class=n>Locale</span><span class=o>.</span><span class=na>UK</span><span class=o>);</span>
</span></span><span class=line><span class=ln id=4><a style=outline:none;text-decoration:none;color:inherit href=#4>4</a></span><span class=cl>  <span class=n>DateTimeFormatter</span> <span class=n>formatterCN</span> <span class=o>=</span>
</span></span><span class=line><span class=ln id=5><a style=outline:none;text-decoration:none;color:inherit href=#5>5</a></span><span class=cl>      <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ofPattern</span><span class=o>(</span><span class=s>&#34;YYYY-MM-dd &#39;第&#39;ww&#39;周&#39;&#34;</span><span class=o>,</span><span class=n>Locale</span><span class=o>.</span><span class=na>CHINA</span><span class=o>);</span>
</span></span><span class=line><span class=ln id=6><a style=outline:none;text-decoration:none;color:inherit href=#6>6</a></span><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;中国时间:%s\n&#34;</span><span class=o>,</span><span class=n>formatterCN</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>date</span><span class=o>));</span><span class=c1>//结果：中国时间：2022-01-01 01
</span></span></span><span class=line><span class=ln id=7><a style=outline:none;text-decoration:none;color:inherit href=#7>7</a></span><span class=cl><span class=c1></span>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>printf</span><span class=o>(</span><span class=s>&#34;英国时间:%s\n&#34;</span><span class=o>,</span><span class=n>formatterUK</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>date</span><span class=o>));</span><span class=c1>//结果：英国时间：2021-01-01 52 因为跨年周在2021年有5天所以被判定为 2021 年
</span></span></span></code></pre></div></div></div></div></div></div></div></div><div id=outline-container-headline-7 class=outline-2><h2 id=headline-7>季度格式</h2><div id=outline-text-headline-7 class=outline-text-2><p>季度相关的格式化字符只有 Q/q 两个，规则都是从一月开始每三个月算一个季度。
唯一不同的在于格式化结果不一样，q 格式除了 qq 显示 01 外，其他数量的 q 都显示为 1 。
而 Q 格式则是不同数量的 Q 在不同地区下有着不同的格式化结果。</p><table><tbody><tr><td>格式</td><td class=align-right>英语地区</td><td class=align-right>中文地区</td></tr><tr><td>Q</td><td class=align-right>1</td><td class=align-right>1</td></tr><tr><td>QQ</td><td class=align-right>01</td><td class=align-right>01</td></tr><tr><td>QQQ</td><td class=align-right>Q1</td><td class=align-right>1 季</td></tr><tr><td>QQQQ</td><td class=align-right>1st quarter</td><td class=align-right>第 1 季度</td></tr><tr><td>QQQQQ</td><td class=align-right>1</td><td class=align-right>1</td></tr></tbody></table></div></div><div id=outline-container-headline-8 class=outline-2><h2 id=headline-8>月份格式</h2><div id=outline-text-headline-8 class=outline-text-2><p>月份格式也只有两个: M/L ,两个格式大同小异，区别在于 M 能支持更多的格式结果</p><table><tbody><tr><td>格式</td><td>英语地区</td><td>中文地区</td></tr><tr><td>M/L</td><td>1/1</td><td>1/1</td></tr><tr><td>MM/LL</td><td>01/01</td><td>01/01</td></tr><tr><td>MMM/LLL</td><td>Jan/1</td><td>一月/一月</td></tr><tr><td>MMMM/LLLL</td><td>January/1</td><td>一月/一月</td></tr><tr><td>MMMMM/LLLLL</td><td>J/1</td><td>1/一月</td></tr></tbody></table></div></div><div id=outline-container-headline-9 class=outline-2><h2 id=headline-9>周格式</h2><div id=outline-text-headline-9 class=outline-text-2><p>周格式有三个：W(基于月的周数),w(基于 Y 格式的周数)。</p><p>其中格式 w 在遭遇跨年时会按照 WeekFields 的规则来进行周数判断，格式化的结果时该
周在当年属于第几周。<br>而格式 W ，则是在遭遇跨月时按照 WeekFields 的规则来判断。如
果该周在新月份中的天数小于 WeekFields 中的一周最小天数，那么结果为 0 ，反之为 1。</p><table><tbody><tr><td>时间</td><td>格式</td><td>英语地区</td><td>中文地区</td></tr><tr><td>2022-01-01</td><td>W/w</td><td>0/52</td><td>1/1</td></tr><tr><td>2022-01-05</td><td>W/w</td><td>1/1</td><td>2/2</td></tr><tr><td>2022-04-01</td><td>W/w</td><td>0/13</td><td>1/14</td></tr></tbody></table></div></div><div id=outline-container-headline-10 class=outline-2><h2 id=headline-10>天格式</h2><div id=outline-text-headline-10 class=outline-text-2><p>关于天的格式有：D, d , E , F , e , c</p><table><tbody><tr><td>格式</td><td>规则</td><td>日期例子</td><td class=align-right>结果</td><td>备注</td></tr><tr><td>D</td><td>查找该天在当年是第几天</td><td>2022-02-10</td><td class=align-right>41</td><td></td></tr><tr><td>d</td><td>查找该天在当月是第几天</td><td>2022-02-10</td><td class=align-right>10</td><td></td></tr><tr><td>E</td><td>查找该天在当周是第几天</td><td>2022-02-10</td><td class=align-right>Thu；Thursday；星期四</td><td>受地区影响有本地化输出</td></tr><tr><td>e/c</td><td>根据 WeekFields 的firstDayOfWeek 来判定该天在当周是第几天</td><td>2022-02-10</td><td class=align-right>4</td><td>受地区影响有本地化输出</td></tr><tr><td>F</td><td>把每月一号当作第一周的第一天，来计算当天属于周内第几天</td><td>2022-02-10</td><td class=align-right>3</td><td>JDK8 官方文档错误，11 已纠正</td></tr></tbody></table></div></div><div id=outline-container-headline-11 class=outline-2><h2 id=headline-11>小时格式</h2><div id=outline-text-headline-11 class=outline-text-2><p>关于小时的格式有：a,h,K,k,H</p><table><tbody><tr><td>格式</td><td>规则</td><td>日期例子</td><td>结果</td><td>备注</td></tr><tr><td>a</td><td>上午还是下午标志</td><td>2022-02-10 13:00:00</td><td>PM;下午</td><td>受Local 影响有本地化输出</td></tr><tr><td>h</td><td>时钟式时间 1-12</td><td>2022-02-10 13:00:00</td><td>1;01</td><td>12:00 输出为 12</td></tr><tr><td>K</td><td>12小时制时间 0-11</td><td>2022-02-10 13:00:00</td><td>1;01</td><td>12:00 输出为 00</td></tr><tr><td>k</td><td>时钟式时间 1-24</td><td>2022-02-10 13:00:00</td><td>13</td><td>00:00 输出为 24</td></tr><tr><td>H</td><td>24小时制 0-23</td><td>2022-02-10 13:00:00</td><td>13</td><td>00:00 输出为 00</td></tr></tbody></table></div></div><div id=outline-container-headline-12 class=outline-2><h2 id=headline-12>分秒格式</h2><div id=outline-text-headline-12 class=outline-text-2><p>关于分和秒的格式有： m，s,S,A,n,N</p><table><tbody><tr><td>格式</td><td>规则</td><td>日期例子</td><td class=align-right>结果</td><td>备注</td></tr><tr><td>m</td><td>小时内的分钟值</td><td>13:10:00</td><td class=align-right>10</td><td></td></tr><tr><td>s</td><td>分钟内的秒值</td><td>13:10:11</td><td class=align-right>11</td><td></td></tr><tr><td>S</td><td>毫秒值 0-999</td><td>13:10:12.434</td><td class=align-right>434</td><td></td></tr><tr><td>A</td><td>对应时间是当天的第多少毫秒</td><td>14:00:00.123</td><td class=align-right>50400123</td><td>一秒等于一千毫秒</td></tr><tr><td>n</td><td>秒内的纳秒数</td><td>14:00:00.123</td><td class=align-right>123000000</td><td>一百万纳秒等于一毫米</td></tr><tr><td>N</td><td>对应时间是当天的第多少纳秒</td><td>14:00:00.123</td><td class=align-right>50400123000000</td><td></td></tr></tbody></table></div></div><div id=outline-container-headline-13 class=outline-2><h2 id=headline-13>额外格式</h2><div id=outline-text-headline-13 class=outline-text-2><table><tbody><tr><td>格式</td><td>规则</td><td>日期例子</td><td>结果</td><td>备注</td></tr><tr><td>VV</td><td>输出当前时区Id</td><td>14:00:00</td><td>Asia/Shanghai</td><td>1.只接受VV，其他个数的V会抛出异常。2.只能用来格式化 ZonedDateTime</td></tr><tr><td>z</td><td>输出当前时区名</td><td>14:00:00</td><td>CST</td><td>注意美国中部时间和北京时间都是 CST</td></tr></tbody></table></div></div></article></main><footer><p>由 <a target=_blank rel=noopener href=https://gohugo.io>Hugo 0.104.3</a> 强力驱动
|
主题
<a target=_blank rel=noopener href=https://github.com/mtaech/notebook>Notebook</a><br>Copyright ©
2021-2022
mtaech All Rights Resarved.<br><span class=icp><a target=_blank href=https://beian.miit.gov.cn/>赣ICP备2022006919号</a></span></p></footer></body></html>